<!DOCTYPE html>
<html lang="en">
	<head>
		<title>MD PnP OpenICE Demo</title>

		<meta name="keywords" content="patient safety, md pnp, mdpnp, ICE, OpenICE, medical device, interoperability, healthcare, integrated clinical environment"/>
		<meta name="description" content="OpenICE is an initiative to create a community implementation of the ASTM F-2761 standard for the Integrated Clinical Environment.  The initiative encompasses not only software implementation of those functionalities described in the standard but also an architecture for a wider clinical ecosystem that incorporates seamless connectivity to increase patient safety.  OpenICE seeks to provide a framework for the inclusion of healthcare devices and systems into the broader Internet of Things and Industrial Internet efforts."/>
		<meta name="title" content="MD PnP | OpenICE | Community for the Integrated Clinical Environment"/>
		
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link href="assets/favicon.ico" rel="shortcut icon">

		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/custom-style.css" rel="stylesheet">
		<script>
		    if(!window.console) {
		    	window.console = {log: function(e) {} };
		    }
		    Date.now = Date.now || function() { return +new Date; }; 

		    if (typeof Array.prototype.forEach != 'function') {
    			Array.prototype.forEach = function(callback){
     			 for (var i = 0; i < this.length; i++){
     			   callback.apply(this, [this[i], i, this]);
      				}
    			};
			}

		</script>
		<script language="javascript" type="text/javascript" src="http://code.jquery.com/jquery-1.11.1.js"></script>
		<!--<script language="javascript" type="text/javascript" src="js/log.min.js"></script>-->
		<script language="javascript" type="text/javascript" src="js/respond.min.js"></script>
		<script language="javascript" type="text/javascript" src="js/moment.min.js"></script>
		<script language="javascript" type="text/javascript" src="http://openice.info/socket.io/socket.io.js"></script>
		

		<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="js/excanvas.min.js"></script><![endif]-->
		<!--<script language="javascript" type="text/javascript" src="js/jquery.min.js"></script>-->
		<script language="javascript" type="text/javascript" src="js/jquery.flot.js"></script>
		<script language="javascript" type="text/javascript" src="js/jquery.flot.time.js"></script>
		<script language="javascript" type="text/javascript" src="js/openice.js"></script>
		<script language="javascript" type="text/javascript" src="js/bootstrap.min.js"></script>
		<script language="javascript" type="text/javascript" src="js/demopreferences.js"></script>
		<script>
		if(window.Uint8Array && window.WebSocket) {
    		document.write("<script language=\"javascript\" type=\"text/javascript\" src=\"js/jsmpg.min.js\"></script>");
		}
		</script>
		<script language="javascript" type="text/javascript" src="js/openice.flot.js"></script>
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-51695046-1', 'auto');ga('send', 'pageview');
		</script>
	</head>
	<body>
		<section id="splash">
			<div id="logo-banner-holder" class="container-fluid">
				<img id="logo-banner" class="hidden-xs" src="./assets/logo-banner.png" />
				<img id="logo" class="visible-xs" src="./assets/logo.png" />
			</div>
			<a class="hidden-xs" href="https://github.com/jeffplourde/openice"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 1000" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" /></a>
			<nav id="main-navbar" class="navbar navbar-default" role="navigation">
				<div class="container">
					<!-- Brand and toggle get grouped for better mobile display -->
					<div class="navbar-header" style="padding:0">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav-collapse">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="./index.html" onclick="ga('send', 'event', 'button', 'click', 'nav-landing');">Demo Documentation</a>
					</div>
					<div id="main-nav-collapse" class="collapse navbar-collapse">
						<ul class="nav navbar-nav">
							<li><a href="http://www.smartamerica.org" target="_blank" onclick="ga('send', 'event', 'button', 'click', 'nav-sa');">SmartAmerica.org</a></li>
							<li><a href="http://www.mdpnp.org/smartamerica.php" target="_blank" onclick="ga('send', 'event', 'button', 'click', 'nav-mdpnpsa');">MDPnP.org/SmartAmerica</a></li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">MD PnP Network<b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="http://www.mdpnp.org/" target="_blank" onclick="ga('send', 'event', 'button', 'click', 'nav-mdpnp');">MD PnP Website</a></li>
									<li><a href="http://mdpnp.sourceforge.net/" target="_blank" onclick="ga('send', 'event', 'button', 'click', 'nav-sourceforge');">Sourceforge</a></li>
									<li><a href="http://discussion.mdpnp.org/index.php" target="_blank" onclick="ga('send', 'event', 'button', 'click', 'nav-discussion');">MD PnP Discussion Board</a></li>
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</section>

		<section id="web-demo">
			<div class="text-center container">
				<h1 style="margin-top:0px">Live Medical Device Data <br /><small class="hidden-xs">Streaming from the MD PnP Lab in Cambridge, MA</small></h1>
				<div id="connectionStateButton" class="btn btn-info">
					<span id="connectionStateLightning" class="glyphicon glyphicon-flash" style="display: none"></span>
					<span id="connectionStateRemove" class="glyphicon glyphicon-remove" style="display: none"></span>
					<span id="connectionStateText"></span>
					<br />
				</div>
			</div>
			<br />
			<div id="webcam" class="col-md-6 container-fluid text-center">
				<h3 style="color: #FFF">Live Video of Medical Devices Creating the Signals</h3>
				<canvas id="videoCanvas" width="320" height="240">
					<p>
						Please use a browser that supports the Canvas Element, like
							<a href="http://www.google.com/chrome">Chrome</a>,
							<a href="http://www.mozilla.com/firefox/">Firefox</a>,
							<a href="http://www.apple.com/safari/">Safari</a> or Internet Explorer 10
					</p>
				</canvas>
			</div>
			<div id="demo-container" class="container-fluid">
				<div id="flotit"></div>
			</div>
		</section>

		<div id="websocket-support-modal" class="modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
						<h4 class="modal-title" id="modalLabel">Error: Your Browser is Not Supported</h4>
					</div>
					<div class="modal-body">
						<div class="container">
							<p>We're sorry but your browser is too old and does not support WebSockets - the underlying technology of the demo.</p>
							<p>Please upgrade to a modern browser.</p>
						</div>
						<div class="container-fluid">
							<hr />
							<h4>Vimeo Demonstration (Requires Latest Flash Player)</h4>
							<p>This <a href="http://vimeo.com/99546813">screen capture</a> shows what the OpenICE demo app looks like with a modern browser.</p>
							<div id="vimeo" class="videowrapper well">
								<!-- <iframe id="player" src="https://player.vimeo.com/video/99546813?autoplay=1&amp;loop=1" height="300" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe> -->
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>


		<div class="footer">
			<img alt="" src="http://arvi.mgh.harvard.edu:8080/ht/?SMARTAMERICADEMO" />
			<small><p>
				Trouble viewing the site? <a href="https://vimeo.com/99546813">Watch a screen capture on Vimeo</a><br />
				<a href="http://caniuse.com/websockets">Is your browser compatible?</a><br />
				Thanks to the <a href="https://github.com/phoboslab/jsmpeg">jsmpeg</a> project for mpeg decoding.
			</p></small>
		</div>
		<script type="text/javascript">
			$(document).ready(function checkWebSocket () {
				if (window.WebSocket){
					if(window.console) {
					//	console.log("BROWSER SUPPORTS WEBSOCKETS");
					}
				} else {
					if(window.console) {
					//	console.log("BROWSER DOES NOT SUPPORT WEBSOCKETS");
					}
					// $('#websocket-support-modal').modal('show');
					// var child = document.createElement('iframe');
					// child.src = 'https://player.vimeo.com/video/99546813?autoplay=1&loop=1';
					// child.id = "player";
					// child.height = 300;
					// child.frameborder = 0;
					// $('#vimeo')[0].appendChild(child);

					 // height="300" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""
					// var player = $('#player');
					// var url = player.attr('src').split('?')[0];
    	// 			player[0].contentWindow.postMessage("{\"method\": \"play\"}", url);
				}});
		</script>
	</body>
</html>